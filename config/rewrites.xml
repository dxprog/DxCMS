<?xml version="1.0" ?>
<rewrites>
	
	<rule redirect="true">
		<expr>^(blog)$</expr>
		<query_string>blog/</query_string>
	</rule>
	<rule>
		<expr>^(blog)/$</expr>
		<query_string>page=content&amp;action=posts&amp;type=$1</query_string>
	</rule>
	
	<rule redirect="true">
		<expr>^(portfolio|art|video)$</expr>
		<query_string>/$1/</query_string>
	</rule>	
	<rule>
		<expr>^(portfolio|art|video)/$</expr>
		<query_string>page=gallery&amp;type=$1</query_string>
	</rule>
	
	<!-- MAIN PAGINATION -->
	<rule redirect="true">
		<expr>^page/([0-9]+)$</expr>
		<query_string>/page/$1/</query_string>
	</rule>
	<rule>
		<expr>^page/([0-9]+)/$</expr>
		<query_string>page=content&amp;action=posts&amp;p=$1</query_string>
	</rule>
	<rule redirect="true">
		<expr>^(blog|portfolio|art|video)/page/([0-9]+)$</expr>
		<query_string>/$1/page/$2/</query_string>
	</rule>
	<rule>
		<expr>^(blog|portfolio|art|video)/page/([0-9]+)/$</expr>
		<query_string>page=content&amp;action=posts&amp;p=$2&amp;type=$1</query_string>
	</rule>
	
	<!-- VIEW BY TAGS -->
	<rule redirect="true">
		<expr>^tag/([^/.]+)$</expr>
		<query_string>/tag/$1/</query_string>
	</rule>
	<rule>
		<expr>^tag/([^/.]+)/$</expr>
		<query_string>page=content&amp;action=posts&amp;tag=$1</query_string>
	</rule>
	<rule redirect="true">
		<expr>^tag/([^/.]+)/page/([0-9]+)$</expr>
		<query_string>/tag/$1/page/$2/</query_string>
	</rule>
	<rule>
		<expr>^tag/([^/.]+)/page/([0-9]+)/$</expr>
		<query_string>page=content&amp;action=posts&amp;tag=$1&amp;p=$2</query_string>
	</rule>
	<rule redirect="true">
		<expr>^(blog|art|video|portfolio)/tag/([^/.]+)$</expr>
		<query_string>/$1/tag/$2/</query_string>
	</rule>
	<rule>
		<expr>^(blog|art|video|portfolio)/tag/([^/.]+)/$</expr>
		<query_string>page=content&amp;action=posts&amp;tag=$2&amp;type=$1</query_string>
	</rule>
	<rule redirect="true">
		<expr>^(blog|art|video|portfolio)/tag/([^/.]+)/page/([0-9]+)$</expr>
		<query_string>/$1/tag/$2/page/$3/</query_string>
	</rule>
	<rule>
		<expr>^(blog|art|video|portfolio)/tag/([^/.]+)/page/([0-9]+)/$</expr>
		<query_string>page=content&amp;action=posts&amp;tag=$2&amp;p=$3&amp;type=$1</query_string>
	</rule>
	
	<!-- CONTENT ARCHIVES -->
	<rule redirect="true">
		<expr>^archives/([0-9]+)/([0-9]+)$</expr>
		<query_string>/archives/$1/$2/</query_string>
	</rule>
	<rule>
		<expr>^archives/([0-9]+)/([0-9]+)/$</expr>
		<query_string>page=content&amp;action=posts&amp;month=$1&amp;year=$2</query_string>
	</rule>
	<rule redirect="true">
		<expr>^archives/([0-9]+)/([0-9]+)/page/([0-9]+)$</expr>
		<query_string>/archives/$1/$2/page/$3/</query_string>
	</rule>
	<rule>
		<expr>^archives/([0-9]+)/([0-9]+)/page/([0-9]+)/$</expr>
		<query_string>page=content&amp;action=posts&amp;month=$1&amp;year=$2&amp;p=$3</query_string>
	</rule>
	
	<!-- CONTENT ENTRY -->
	<rule redirect="true">
		<expr>^entry/([^/.]+)$</expr>
		<query_string>/entry/$1/</query_string>
	</rule>
	<rule redirect="true">
		<expr>^blog/entry/([^/.]+)$</expr>
		<query_string>/entry/$1/</query_string>
	</rule>
	<rule>
		<expr>^entry/([^/.]+)/$</expr>
		<query_string>page=content&amp;action=entry&amp;perma=$1</query_string>
	</rule>
	
	<!-- OAUTH CALLBACK -->
	<rule>
		<expr>^login/$</expr>
		<query_string>page=content&amp;action=login</query_string>
	</rule>
	
	<!-- BLOG ADD COMMENT -->
	<rule>
		<expr>^post_comment/([^/.]+)/$</expr>
		<query_string>page=content&amp;action=comment&amp;perma=$1</query_string>
	</rule>
		
	<!-- CONTACT -->
	<rule redirect="true">
		<expr>^contact$</expr>
		<query_string>/contact/</query_string>
	</rule>
	<rule>
		<expr>^contact/$</expr>
		<query_string>page=static&amp;static=contact</query_string>
	</rule>

	<!-- GALLERY
	<rule redirect="true">
		<expr>^gallery$</expr>
		<query_string>/gallery/</query_string>
	</rule>
	<rule>
		<expr>^gallery/$</expr>
		<query_string>page=gallery</query_string>
	</rule> -->
	<rule redirect="true">
		<expr>^gallery/([^/.]+)$</expr>
		<query_string>/media/$1/</query_string>
	</rule>
	<rule>
		<expr>^gallery/([^/.]+)/$</expr>
		<query_string>page=gallery&amp;action=item&amp;perma=$1</query_string>
	</rule>

	<!-- COMICS -->
	<rule redirect="true">
		<expr>^comic$</expr>
		<query_string>/comic/</query_string>
	</rule>
	<rule>
		<expr>^comic/$</expr>
		<query_string>page=comic</query_string>
	</rule>
	<rule>
		<expr>^comic/([^/.]+)/$</expr>
		<query_string>page=comic&amp;perma=$1</query_string>
	</rule>
	
	<!-- ADMIN -->
	<rule redirect="true">
		<expr>^admin$</expr>
		<query_string>/admin/</query_string>
	</rule>
	<rule>
		<expr>^admin/$</expr>
		<query_string>page=admin</query_string>
	</rule>
	<rule>
		<expr>^admin/login/</expr>
		<query_string>page=admin&amp;action=login</query_string>
	</rule>
	<rule>
		<expr>^admin/([^/.]+)/overview/</expr>
		<query_string>page=admin&amp;action=overview&amp;type=$1</query_string>
	</rule>
	<rule>
		<expr>^admin/([^/.]+)/new/</expr>
		<query_string>page=admin&amp;action=new&amp;type=$1</query_string>
	</rule>
	<rule>
		<expr>^admin/([^/.]+)/create/</expr>
		<query_string>page=admin&amp;action=create&amp;type=$1</query_string>
	</rule>
	<rule>
		<expr>^admin/([^/.]+)/edit/([0-9]+)/</expr>
		<query_string>page=admin&amp;action=edit&amp;type=$1&amp;id=$2</query_string>
	</rule>
	<rule>
		<expr>^admin/([^/.]+)/update/([0-9]+)/</expr>
		<query_string>page=admin&amp;action=update&amp;type=$1&amp;id=$2</query_string>
	</rule>
	<rule>
		<expr>^admin/upload/([^/.]+)/$</expr>
		<query_string>page=admin&amp;action=upload&amp;control=$1</query_string>
	</rule>
	
	<!-- RSS FEEDS -->
	<rule redirect="true">
		<expr>^blog/dxprog/rss.xml$</expr>
		<query_string>http://feeds.feedburner.com/dxprog</query_string>
	</rule>
	<rule redirect="true">
		<expr>^rss.xml$</expr>
		<query_string>http://feeds.feedburner.com/dxprog</query_string>
	</rule>
	<rule>
		<expr>^feed\.xml$</expr>
		<query_string>page=content&amp;action=rss</query_string>
	</rule>
</rewrites>